"use strict";(self.webpackChunkgoit_tp_test_01=self.webpackChunkgoit_tp_test_01||[]).push([[662],{662:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(142);function o(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a=r(439),i=r(791),l=r(689);var u=r(87),f=r(184),d=function(e){var t=e.to,r=e.children;return(0,f.jsx)(u.rU,{to:t,className:"BackLink",children:r})};var p=r.p+"static/media/goit-logo.e917114d7945c04c85a8946a331d28b6.svg";function h(e){var t=e.user,r=e.tweets,n=e.followers,o=e.isfollowing,s=e.avatar,c=e.onHandleClick;function a(e){return e<1e3?e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return(0,f.jsxs)("div",{className:"Card",children:[(0,f.jsx)("img",{src:p,alt:"GoIt Logo",className:"Card__logo"}),(0,f.jsx)("div",{className:"Card__imgwrapper",children:(0,f.jsx)("img",{src:s,alt:t,className:"Card__img"})}),(0,f.jsx)("div",{className:"Card__delimiter"}),(0,f.jsxs)("div",{className:"Card__data",children:[(0,f.jsxs)("p",{className:"Card__txt",children:[a(r)," tweets"]}),(0,f.jsxs)("p",{className:"Card__txt",children:[a(n)," followers"]}),o?(0,f.jsx)("button",{className:"Card__button Card__button--following",onClick:c,children:"following"}):(0,f.jsx)("button",{className:"Card__button",onClick:c,children:"follow"})]})]})}function m(e){var t=e.tweets,r=e.updateTweet;return(0,f.jsx)("section",{className:"Cards",children:(0,f.jsx)("ul",{className:"Cards__list",children:t.map((function(e){var t=e.id,n=e.user,o=e.tweets,s=e.followers,c=e.isfollowing,a=e.avatar;return(0,f.jsx)("li",{children:(0,f.jsx)(h,{user:n,tweets:o,followers:s,isfollowing:c,avatar:a,onHandleClick:function(){return r(t)}})},t)}))})})}var j=function(){var e,t,r=null!==(e=null===(t=(0,l.TH)().state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/",n=(0,i.useState)([]),o=(0,a.Z)(n,2),s=o[0],u=o[1];return(0,i.useEffect)((function(){setTimeout((function(){fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users",{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))})).then((function(e){u(e)})).catch((function(e){console.log(e.message)}))}),250)}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d,{to:r,children:"Back"}),(0,f.jsx)("h1",{className:"App__title",children:"Tweets"}),(0,f.jsx)(m,{tweets:s,updateTweet:function(e){var t=s.find((function(t){return t.id===e})),r=t.followers,n=t.isfollowing,o=n?r-1:r+1,a=!n;(function(e,t,r){return fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users/".concat(e),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({followers:t,isfollowing:r})}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))}))})(e,o,a).then((function(t){u((function(t){return t.map((function(t){return t.id===e?c(c({},t),{},{followers:o,isfollowing:a}):t}))}))})).catch((function(e){console.log(e.message)}))}})]})}}}]);
//# sourceMappingURL=662.261b7f42.chunk.js.map