"use strict";(self.webpackChunkgoit_tp_test_01=self.webpackChunkgoit_tp_test_01||[]).push([[841],{841:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var s=n(413),o=n(433),r=n(439),a=n(791),i=n(689);var l=n(87),c=n(184),u=function(e){var t=e.to,n=e.children;return(0,c.jsx)(l.rU,{to:t,className:"BackLink",children:n})};var d=n.p+"static/media/goit-logo.e917114d7945c04c85a8946a331d28b6.svg";function f(e){var t=e.user,n=e.tweets,s=e.followers,o=e.isfollowing,r=e.avatar,a=e.onHandleClick;function i(e){return e<1e3?e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return(0,c.jsxs)("div",{className:"Card",children:[(0,c.jsx)("img",{src:d,alt:"GoIt Logo",className:"Card__logo"}),(0,c.jsx)("div",{className:"Card__imgwrapper",children:(0,c.jsx)("img",{src:r,alt:t,className:"Card__img"})}),(0,c.jsx)("div",{className:"Card__delimiter"}),(0,c.jsxs)("div",{className:"Card__data",children:[(0,c.jsxs)("p",{className:"Card__txt",children:[i(n)," tweets"]}),(0,c.jsxs)("p",{className:"Card__txt",children:[i(s)," followers"]}),o?(0,c.jsx)("button",{className:"Card__button Card__button--following",onClick:a,children:"following"}):(0,c.jsx)("button",{className:"Card__button",onClick:a,children:"follow"})]})]})}function m(e){var t=e.tweets,n=e.updateTweet;return(0,c.jsx)("section",{className:"Cards",children:(0,c.jsx)("ul",{className:"Cards__list",children:t.map((function(e){var t=e.id,s=e.user,o=e.tweets,r=e.followers,a=e.isfollowing,i=e.avatar;return(0,c.jsx)("li",{children:(0,c.jsx)(f,{user:s,tweets:o,followers:r,isfollowing:a,avatar:i,onHandleClick:function(){return n(t)}})},t)}))})})}function h(e){var t=e.message;return(0,c.jsx)("section",{className:"Info",children:(0,c.jsx)("p",{children:t})})}var w=n(402);function g(e){var t=e.waitingNote;return(0,c.jsxs)("div",{className:"Loader",children:[(0,c.jsx)(w.s5,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"96",visible:!0}),(0,c.jsx)("p",{children:t})]})}function j(e){var t=e.onClick;return(0,c.jsx)("button",{onClick:t,className:"LoadMoreButton",children:"Load more"})}function v(e){var t=e.message;return(0,c.jsx)("section",{className:"Warning",children:(0,c.jsx)("p",{children:t})})}var x=n(93),p=function(){var e,t,n=null!==(e=null===(t=(0,i.TH)().state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/",l=(0,a.useState)([]),d=(0,r.Z)(l,2),f=d[0],w=d[1],p=(0,a.useState)(1),_=(0,r.Z)(p,2),C=_[0],N=_[1],k=(0,a.useState)(!0),b=(0,r.Z)(k,2),S=b[0],Z=b[1],y=(0,a.useState)(!1),T=(0,r.Z)(y,2),L=T[0],E=T[1],q=(0,a.useState)(null),B=(0,r.Z)(q,2),P=B[0],H=B[1],F=(0,a.useState)(""),G=(0,r.Z)(F,2),I=G[0],U=G[1],W=(0,a.useRef)(!1);(0,a.useEffect)((function(){return Z(!0),E(!1),W.current,setTimeout((function(){var e,t;(e=C,t=3,fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users?p=".concat(e,"&l=").concat(t),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))}))).then((function(e){w((function(t){return[].concat((0,o.Z)(t),(0,o.Z)(e))}))})).catch((function(e){H(e),E(!0),console.log(e.message)})).finally(Z(!1))}),370),function(){W.current=!0}}),[C]);var A=function(e,t){switch(e){case"all":default:return t;case"follow":return t.filter((function(e){return!e.isfollowing}));case"following":return t.filter((function(e){return e.isfollowing}))}}(I,f);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("section",{className:"Service",children:[(0,c.jsx)(u,{to:n,children:"Back"}),(0,c.jsx)(x.ZP,{options:[{label:"all",value:"all"},{label:"follow",value:"follow"},{label:"following",value:"following"}],className:"Filter",onChange:function(e){return t=e.value,void U(t);var t}})]}),(0,c.jsx)("h1",{className:"App__title",children:"Tweets"}),(0,c.jsx)(m,{tweets:A,updateTweet:function(e){var t=f.find((function(t){return t.id===e})),n=t.followers,o=t.isfollowing,r=o?n-1:n+1,a=!o;(function(e,t,n){return fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users/".concat(e),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({followers:t,isfollowing:n})}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))}))})(e,r,a).then((function(t){w((function(t){return t.map((function(t){return t.id===e?(0,s.Z)((0,s.Z)({},t),{},{followers:r,isfollowing:a}):t}))}))})).catch((function(e){console.log(e.message)}))}}),S?(0,c.jsx)(g,{waitingNote:"Loading  more tweets..."}):L?(0,c.jsx)(v,{message:P.message}):C>3?(0,c.jsx)(h,{message:"End of tweet list"}):(0,c.jsx)(j,{onClick:function(){N(C+1)}})]})}}}]);
//# sourceMappingURL=841.6f7bf777.chunk.js.map