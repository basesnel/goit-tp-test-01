"use strict";(self.webpackChunkgoit_tp_test_01=self.webpackChunkgoit_tp_test_01||[]).push([[841],{841:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var s=n(683),r=n(433),o=n(439),a=n(791),i=n(689);var c=n(87),l=n(184),u=function(e){var t=e.to,n=e.children;return(0,l.jsx)(c.rU,{to:t,className:"BackLink",children:n})};var d=n.p+"static/media/goit-logo.e917114d7945c04c85a8946a331d28b6.svg";function f(e){var t=e.user,n=e.tweets,s=e.followers,r=e.isfollowing,o=e.avatar,a=e.onHandleClick;function i(e){return e<1e3?e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return(0,l.jsxs)("div",{className:"Card",children:[(0,l.jsx)("img",{src:d,alt:"GoIt Logo",className:"Card__logo"}),(0,l.jsx)("div",{className:"Card__imgwrapper",children:(0,l.jsx)("img",{src:o,alt:t,className:"Card__img"})}),(0,l.jsx)("div",{className:"Card__delimiter"}),(0,l.jsxs)("div",{className:"Card__data",children:[(0,l.jsxs)("p",{className:"Card__txt",children:[i(n)," tweets"]}),(0,l.jsxs)("p",{className:"Card__txt",children:[i(s)," followers"]}),r?(0,l.jsx)("button",{className:"Card__button Card__button--following",onClick:a,children:"following"}):(0,l.jsx)("button",{className:"Card__button",onClick:a,children:"follow"})]})]})}function m(e){var t=e.tweets,n=e.updateTweet;return(0,l.jsx)("section",{className:"Cards",children:(0,l.jsx)("ul",{className:"Cards__list",children:t.map((function(e){var t=e.id,s=e.user,r=e.tweets,o=e.followers,a=e.isfollowing,i=e.avatar;return(0,l.jsx)("li",{children:(0,l.jsx)(f,{user:s,tweets:r,followers:o,isfollowing:a,avatar:i,onHandleClick:function(){return n(t)}})},t)}))})})}function h(e){var t=e.message;return(0,l.jsx)("section",{className:"Info",children:(0,l.jsx)("p",{children:t})})}var g=n(402);function j(e){var t=e.waitingNote;return(0,l.jsxs)("div",{className:"Loader",children:[(0,l.jsx)(g.s5,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"96",visible:!0}),(0,l.jsx)("p",{children:t})]})}function w(e){var t=e.onClick;return(0,l.jsx)("button",{onClick:t,className:"LoadMoreButton",children:"Load more"})}function x(e){var t=e.message;return(0,l.jsx)("section",{className:"Warning",children:(0,l.jsx)("p",{children:t})})}var p=function(){var e,t,n=null!==(e=null===(t=(0,i.TH)().state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/",c=(0,a.useState)([]),d=(0,o.Z)(c,2),f=d[0],g=d[1],p=(0,a.useState)(1),_=(0,o.Z)(p,2),v=_[0],C=_[1],N=(0,a.useState)(!0),k=(0,o.Z)(N,2),b=k[0],y=k[1],S=(0,a.useState)(!1),Z=(0,o.Z)(S,2),T=Z[0],L=Z[1],E=(0,a.useState)(null),q=(0,o.Z)(E,2),B=q[0],H=q[1],P=(0,a.useRef)(!1);(0,a.useEffect)((function(){return y(!0),L(!1),P.current,setTimeout((function(){var e,t;(e=v,t=3,fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users?p=".concat(e,"&l=").concat(t),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))}))).then((function(e){g((function(t){return[].concat((0,r.Z)(t),(0,r.Z)(e))}))})).catch((function(e){H(e),L(!0),console.log(e.message)})).finally(y(!1))}),370),function(){P.current=!0}}),[v]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{to:n,children:"Back"}),(0,l.jsx)("h1",{className:"App__title",children:"Tweets"}),(0,l.jsx)(m,{tweets:f,updateTweet:function(e){var t=f.find((function(t){return t.id===e})),n=t.followers,r=t.isfollowing,o=r?n-1:n+1,a=!r;(function(e,t,n){return fetch("https://6457a8a30c15cb14820dc3cc.mockapi.io/users/".concat(e),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({followers:t,isfollowing:n})}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, bad request from the query."))}))})(e,o,a).then((function(t){g((function(t){return t.map((function(t){return t.id===e?(0,s.Z)((0,s.Z)({},t),{},{followers:o,isfollowing:a}):t}))}))})).catch((function(e){console.log(e.message)}))}}),b?(0,l.jsx)(j,{waitingNote:"Loading  more tweets..."}):T?(0,l.jsx)(x,{message:B.message}):v>3?(0,l.jsx)(h,{message:"End of tweet list"}):(0,l.jsx)(w,{onClick:function(){C(v+1)}})]})}}}]);
//# sourceMappingURL=841.85cbde16.chunk.js.map